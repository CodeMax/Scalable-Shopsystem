{"version":3,"sources":["app/backendcall.service.ts"],"names":[],"mappings":"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","file":"app/backendcall.service.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Http, Headers, Response, RequestOptions } from '@angular/http';\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/catch';\nimport 'rxjs/add/operator/toPromise';\r\nimport 'rxjs/add/observable/throw';\r\nimport {Observable} from 'rxjs/Observable';\r\nimport {Token} from './token.service';\r\nimport {Article} from './article/article.component';\r\nimport {Shoppingcart} from './shoppingcart/shoppingcart.service';\r\nimport {User} from './user.service';\r\n\r\n@Injectable()\nexport class BackendcallService {\n\r\n      private actionUrl: string;\r\n      private headers: Headers;\r\n      private encodedString: string;\r\n\r\n      constructor(private _http: Http, user: string, pw: string, actionUrl: string) {\r\n        if (user === 'token') {\r\n          this.encodedString = pw;\r\n        } else {\r\n          this.encodedString = 'Basic ' + btoa( user + ':' + pw);\r\n        }\r\n\r\n        this.actionUrl = actionUrl;\r\n        this.headers = new Headers();\r\n        this.headers.append('Authorization', this.encodedString);\r\n        this.headers.append('Content-Type', 'application/json');\r\n        this.headers.append('Accept', 'application/json');\r\n      }\r\n\r\n      // ArticleList\r\n      public getAllArticle = (): Observable<string[]> => {\r\n        return this._http.get(this.actionUrl, {headers: this.headers})\r\n                   .map(this.extractArticleList)\r\n                   .catch(this.handleError);\r\n      }\r\n\r\n      // Article-Detailpage\r\n      public getArticle = (): Observable<Article> => {\r\n        return this._http.get(this.actionUrl, {headers: this.headers})\r\n                   .map(this.extract)\r\n                   .catch(this.handleError);\r\n      }\r\n\r\n      public postArticle = (article: Article): Observable<any> => {\r\n            let body = JSON.stringify(article);\r\n            let options = new RequestOptions({ headers: this.headers });\r\n\r\n            return this._http.post(this.actionUrl, body, options)\r\n                       .catch(this.handleError);\r\n        }\r\n\r\n\r\n      // Authentication\r\n      public getToken(): Promise<Token> {\r\n          return this._http.get(this.actionUrl, {headers: this.headers})\r\n               .toPromise()\r\n               .then(response => this.extractToken(response))\r\n               .catch(this.handleError);\r\n      }\r\n\r\n\r\n      // Shoppingcart\r\n      public getAllShoppingcartItems = (): Observable<Shoppingcart[]> => {\r\n        return this._http.get(this.actionUrl, {headers: this.headers})\r\n                   .map(this.extractShoppingCartList)\r\n                   .catch(this.handleError);\r\n      }\r\n      public postArticleToShoppingcart = (articleId: number, userId: number, quantity: number): Observable<any> => {\r\n          let body = JSON.stringify({ articleId, userId, quantity });\r\n          let options = new RequestOptions({ headers: this.headers });\r\n\r\n          return this._http.post(this.actionUrl, body, options)\r\n                     .catch(this.handleError);\r\n      }\r\n\r\n      // User\r\n      public updateUserData = (id: Number, firstname: string, lastname: string, address: string, postcode: string,\r\n                             city: string, country: string): Observable<User> => {\r\n          let body = JSON.stringify({id, firstname, lastname, address, postcode, city, country });\r\n          let options = new RequestOptions({ headers: this.headers });\r\n\r\n          return this._http.put(this.actionUrl, body, options)\r\n                     .map(this.extract)\r\n                     .catch(this.handleError);\r\n      }\r\n      public saveAuthData = (username: string, password: string): Observable<Number> => {\r\n          let body = JSON.stringify({username, password});\r\n          let options = new RequestOptions({ headers: this.headers });\r\n\r\n          return this._http.post(this.actionUrl, body, options)\r\n                     .map(this.extract)\r\n                     .catch(this.handleError);\r\n      }\r\n\r\n\r\n      private extractArticleList(res: Response) {\r\n          console.log('extractData() is executed.');\r\n          let body = res.json();\r\n          return body.articleList || { };\r\n      }\r\n\r\n      private extract(res: Response) {\r\n          console.log('extract() is executed.');\r\n          let body = res.json();\r\n          return body || { };\r\n      }\r\n\r\n      private extractShoppingCartList(res: Response) {\r\n          console.log('extract() is executed.');\r\n          let body = res.json();\r\n          return body.shoppingcartList || { };\r\n      }\r\n\r\n      private extractToken(res: Response) {\r\n          console.log('extractData() is executed.');\r\n          let token = res.json().jwtToken;\r\n          return token || { };\r\n      }\r\n\r\n      private handleError (error: any) {\n        let errMsg = (error.message) ? error.message :\r\n           error.status ? `${error.status} - ${error.statusText}` : 'Server error';\r\n        console.error(errMsg);\r\n        return Observable.throw(401);\r\n      }\r\n}\r\n"],"sourceRoot":"/source/"}